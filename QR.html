<script>
let qrcode = null;

function generateQRCode() {
    const dataInput = document.getElementById("qr-data");
    const data = dataInput.value.trim();
    const errorMessage = document.getElementById("error-message");
    const qrCodeContainer = document.getElementById("qrcode-output");
    
    errorMessage.textContent = ''; // Clear error

    if (!data) {
        errorMessage.textContent = 'Please enter a value to generate a QR code.';
        qrCodeContainer.innerHTML = '';
        return;
    }

    qrCodeContainer.innerHTML = ''; // Clear previous QR code

    // Recreate QRCode object for each generation (safer)
    qrcode = new QRCode(qrCodeContainer, {
        text: data,
        width: 200,
        height: 200,
        colorDark: "#000000",
        colorLight: "#ffffff",
        correctLevel: QRCode.CorrectLevel.H
    });
}

document.addEventListener('DOMContentLoaded', () => {
    // Generate initial QR code
    generateQRCode();

    document.getElementById('generate-button').addEventListener('click', generateQRCode);
});
</script>
